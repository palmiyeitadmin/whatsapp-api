name = "whatsapp-api"
compatibility_date = "2024-10-21"
pages_build_output_dir = "public"

# D1 Database binding (Development/Default)
[[d1_databases]]
binding = "CF_INFOBIP_DB"
database_name = "cf-infobip-db"
database_id = "1153df23-a187-4c99-8d48-42edeb0ed734"

[env.production]
name = "whatsapp-api"

[[env.production.d1_databases]]
binding = "CF_INFOBIP_DB"
database_name = "cf-infobip-db"
database_id = "1153df23-a187-4c99-8d48-42edeb0ed734"

# Note: Environment variables are managed via Cloudflare Pages Secrets
# Use: npx wrangler pages secret put VARIABLE_NAME --project-name whatsapp-api
# Required secrets:
# - GOOGLE_CLIENT_ID
# - GOOGLE_CLIENT_SECRET
# - INFOBIP_API_KEY
# - INFOBIP_BASE_URL
# - INFOBIP_WHATSAPP_SENDER
# - JWT_SECRET

[env.preview]
name = "whatsapp-api-preview"

[[env.preview.d1_databases]]
binding = "CF_INFOBIP_DB"
database_name = "cf-infobip-db"
database_id = "1153df23-a187-4c99-8d48-42edeb0ed734"

# KV namespace for sessions (optional alternative to JWT)
# [[kv_namespaces]]
# binding = "SESSIONS"
# id = "your-kv-namespace-id"